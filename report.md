# 專題報告

### 1. **陪伴系統（AI 日常對話與行為預測）**

#### **主要目標：**
- 提供與失智症患者的日常對話。
- 分析患者的語言模式與行為變化，並預測其健康狀況的發展趨勢。

#### **可以結合的技術：**

- **語音識別與合成：**
  - 使用 **語音識別技術**（例如 Google Speech-to-Text）來將患者的語音轉換為文字。
  - 使用 **語音合成技術**（例如 Google Text-to-Speech）來生成回應，與患者進行語音對話，避免患者必須操作界面。

- **情感分析與語言模式識別：**
  - 使用 **自然語言處理（NLP）** 和 **情感分析** 技術，分析患者的語言來識別情感變化。這有助於判斷患者的情緒狀態或健康狀況。
  - 例如，如果患者表達焦慮或困惑，系統可以適時提供安撫或提醒，避免情緒波動對健康產生不利影響。

- **行為模式預測：**
  - 使用 **機器學習（ML）** 模型來分析患者的行為數據（如語言反應、行為模式），並預測其行為變化或健康狀況的發展。
  - 可以使用 **深度學習（Deep Learning）** 和 **LSTM（長短期記憶網絡）** 模型來識別行為變化的趨勢並進行預測。

- **情感與語言模式追蹤：**
  - 透過日常對話收集語音資料，並對其進行分析，追蹤失智症患者的語言模式和情感變化。例如，AI 可以識別語言中的迷失感、焦慮或不安，並預測未來幾天的行為趨勢。

#### **示例應用：**
- **日常提醒與陪伴：** AI 系統每天會提醒患者吃藥、進食、運動等。
- **行為變化預測：** 如果 AI 系統發現患者語言表達中出現更多的混亂或記憶障礙，它可能會發出警報，提醒家屬需要注意。

### 2. **家屬支援系統（爬蟲技術與健康資訊）**

#### **主要目標：**
- 利用爬蟲技術收集健康資訊（如最新的失智症治療方法、醫療資源等）。
- 提供適當的照護建議，抓取政府資源（例如長照補助、診所資訊等）。

#### **可以結合的技術：**

- **爬蟲技術：**
  - 使用 **爬蟲** 技術自動化抓取失智症相關的資料，如最新的治療方法、專科診所、醫院的資料，以及政府提供的長照補助、照護政策等。這些資料可以提供給家屬，讓他們了解並及時獲得照護支持。
  - 使用 **Selenium** 和 **BeautifulSoup** 等工具來抓取網頁內容，並自動分析整理成家屬可以輕鬆理解的資訊。

- **健康數據整合：**
  - 如果患者配戴有健康監控設備（如智能手環、智能手錶等），這些設備可以收集生理數據（如心率、血壓、睡眠等），這些數據可以與爬取的醫療資訊結合，提供個性化的健康建議。
  - 例如，如果健康監控數據顯示患者心率異常，系統可以通知家屬並提供相關建議。

- **智能通知與建議系統：**
  - 基於爬取的資料，系統可以自動發送建議和通知。例如，如果政府發布新的失智症補助或照護資源，系統會自動向家屬發送提醒。
  - 系統還可以根據患者的健康狀況（如最新的診斷或治療方案）提供相應的照護建議。

#### **示例應用：**
- **健康數據分析：** 連接智能健康設備，分析失智症患者的日常生理數據，並結合爬取的醫療資訊，提供家屬健康管理建議。
- **自動化通知：** 系統會定期向家屬發送有關最新政府長照政策、醫療資源的更新，或者當爬取到新的治療方案時，也會提醒家屬。

### 3. **結合 AI、爬蟲與 GUI 來實現更智能的系統**

#### **技術整合與延伸應用：**

- **智能行為預測 + 健康數據收集：**
  - 結合行為預測系統與健康數據的收集，系統可以自動分析患者的行為變化並結合其生理數據進行綜合分析。如果患者的行為模式變得異常（例如更少說話或更頻繁的焦慮表現），同時生理數據顯示血壓或心率異常，系統可以向家屬發出緊急警告並提供即時應對建議。

- **家庭支持中心（GUI）：**
  - 提供家屬一個集中的 **GUI 界面**，用於查看患者的語音記錄、行為變化分析、健康數據、政府資源等。家屬可以在界面中查看每日的健康報告、患者的情感狀態、語言模式，以及系統自動生成的照護建議。

#### **延伸應用建議：**
- **智能硬體整合：**
  - 在系統中整合智能硬體設備（如智能手錶、血糖監測儀等），通過這些設備即時獲取患者的生理數據，並結合行為分析來給出個性化的照護建議。
  
- **多語言與語音交互：**
  - 如果陪伴系統的語言對話支持多種語言，或系統可以處理各種語音命令，那麼它將能夠在多語言環境中運作，服務更多的家庭。

- **增強學習（Reinforcement Learning）：**
  - 使用增強學習來讓系統根據患者的回應不斷調整對話策略。通過不斷學習患者的行為模式，系統可以變得越來越智能，並提供更精確的陪伴和照護建議。



### 4. **Line Bot**

#### 如何實現家庭配對和識別？

1. **使用 LINE 的用戶 ID 或者 ID Token**
   每個與你的 LINE Bot 互動的用戶都有一個 **唯一的用戶 ID**（LINE 用戶的 ID）。你可以利用這個唯一 ID 來識別每個用戶，並將其分配到相應的家庭。

2. **創建一個家庭資料庫**
   為每個家庭創建一個資料庫，並將每個家庭成員的 LINE 用戶 ID 進行配對。這樣，你就能夠根據每個用戶的 ID 來識別他們屬於哪個家庭，並確保每個家庭的資料是隔離的。

3. **家庭註冊流程**
   你可以設計一個註冊流程，讓 **家屬** 在第一次與 **LINE Bot** 互動時，通過簡單的操作（如提供一個家庭識別碼、家庭名稱或家庭密碼）來將他們的 LINE 帳戶與家庭配對。這樣，你就能夠確保每個用戶加入到正確的家庭。

#### 具體操作方式：

##### 1. **家屬註冊家庭識別碼**
- 在家屬第一次與 Bot 互動時，可以讓他們輸入家庭識別碼，或是讓他們掃描 QR Code 來加入家庭。例如，家庭可以在開設 Bot 之前提供一個家庭密碼，讓每個家屬用這個密碼來註冊。

```python
@handler.add(MessageEvent, message=TextMessage)
def handle_message(event):
    text = event.message.text

    if text.startswith("家庭識別碼:"):  # 假設家屬輸入家庭識別碼
        family_code = text.split(":")[1].strip()
        user_id = event.source.user_id  # 獲取用戶的唯一 ID
        
        # 儲存家庭信息
        assign_user_to_family(user_id, family_code)
        
        line_bot_api.reply_message(
            event.reply_token,
            TextSendMessage(text="您已成功加入家庭！")
        )
```

##### 2. **建立家庭資料庫**
你可以使用 **資料庫**（如 MySQL、MongoDB）來儲存每個家庭的資料。每當家屬加入某個家庭時，將他們的 **LINE 用戶 ID** 與 **家庭識別碼** 或家庭的其他信息進行關聯。

```python
# 假設使用 MongoDB 儲存家庭資料
import pymongo

client = pymongo.MongoClient("mongodb://localhost:27017/")
db = client["family_system"]
families = db["families"]

def assign_user_to_family(user_id, family_code):
    # 假設每個家庭有一個唯一的家庭識別碼
    family_data = families.find_one({"family_code": family_code})
    
    if family_data:
        family_data["members"].append(user_id)
        families.update_one({"family_code": family_code}, {"$set": family_data})
    else:
        families.insert_one({
            "family_code": family_code,
            "members": [user_id],
        })
```

##### 3. **識別家庭並給予相應服務**
當家屬或老人發送訊息給 Bot 時，你可以利用用戶的 **LINE 用戶 ID** 查找他們所屬的家庭，並根據家庭給予個性化的回應。

```python
def get_family_by_user_id(user_id):
    family_data = families.find_one({"members": user_id})
    return family_data

@handler.add(MessageEvent, message=TextMessage)
def handle_message(event):
    user_id = event.source.user_id
    family_data = get_family_by_user_id(user_id)
    
    if family_data:
        # 找到家庭並回應家庭成員的服務
        reply_text = "您好，您屬於 " + family_data["family_code"] + " 家庭。請問需要什麼幫助？"
    else:
        reply_text = "未找到您的家庭資料，請先註冊家庭識別碼。"
    
    line_bot_api.reply_message(
        event.reply_token,
        TextSendMessage(text=reply_text)
    )
```

##### 4. **家庭專屬功能**
當你識別出用戶屬於哪個家庭後，你可以給予特定的功能：
- **家屬**：查看家庭成員的健康狀況、設定照護計劃、接收提醒通知等。
- **老人**：透過與 Bot 的對話，獲得日常陪伴，情感支持等。

